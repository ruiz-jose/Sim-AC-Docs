---
title: Lenguaje ensamblador üë©üèø‚Äçüíª
description: Descrpci√≥n del lenguaje ensamblador
---

El ensamblador es un programa encargado de traducir las instrucciones y definiciones de un programa escrito en lenguaje ensamblador a codigo maquina que entiende el CPU.
Se construyo un traductor de lenguaje ensablador Sim-AC a su correspondiente c√≥digo m√°quina en el lenguaje Python:
(ver [Ensamblador](https://github.com/ruiz-jose/Sim-AC-Asm))


## Modo de direccionamiento a memoria

Para hacer referencia a un contenido de memoria se coloca la direcci√≥n dentro de `[]`.  

Por ejemplo: si desea escribir un programa que sume `2 + 3`, deber√≠a ser algo como esto:

Ejemplo de subrutina:

```ac
0. LDA [4]
1. ADD [5]
2. STA [6]
3. HLT
4. 2
5. 3
6. 0
```
(ver [Repertorio de instrucciones](/Sim-AC-Docs/parte-2-disenio-cpu/sim-ac/0-repertorio))

### Ejecuci√≥n del programa

0. La primer linea de c√≥digo es la `l√≠nea 0`, podemos ver `LDA [4]`, esto significa que carga el valor de la `direcci√≥n 4` en el `registro AC`. Esta `direcci√≥n 4` est√° en la `l√≠nea 4` que tiene un valor de `2`. Por lo tanto, carga `2` en el `registro AC`.

1. En la `l√≠nea 1`, tenemos `ADD [5]`, esto sumar√° el contenido de la `direcci√≥n 5` con el `registro AC`, luego  el resultado queda almacenado en el `registro AC` ser√° `5`.

2. En la `l√≠nea 2`, tenemos `STA [6]`, esto almacenar√° el contenido `registro AC` en la `direcci√≥n 6`.

3. En la `l√≠nea 3`, tenemos `HLT`, esto detiene el programa.


## Etiquetas
Para facilitar la programaci√≥n en lenguaje ensamblador y no tener que conocer la posici√≥n donde guardo un dato se utilizan etiquetas que son referencias a posiciones de memoria.


### Definici√≥n de datos (DB:Define Byte)
La palabra reservada del lenguaje ensamblador para definir una etiqueta de 1 byte es DB (Define Byte).
En este ejemplo, las etiquetas: `X`, `Y` y `Z` act√∫an como punteros a direcciones de memoria. El ensamblador pasar√° primero por el c√≥digo para encontrar todas las etiquetas y registrar sus direcciones de memoria. Luego, en la segunda pasada, sustituir√° las etiquetas por las direcciones reales.  

```ac
0. LDA [X]
1. ADD [Y]
2. STA [Z]
3. HLT
4. <-- X:  DB  3
5. <-- Y:  DB  2
6. <-- Z:  DB  0
```
Las etiquetas pueden hacer referencia a una posici√≥n de memoria, ya sea una dato o una instrucci√≥n.

```ac
0. LDA [X]
1. <-- Bucle: ADD [Y]
2. JMP Bucle
3. HLT
4. <-- X:  DB  3
5. <-- Y:  DB  2
6. <-- Z:  DB  0
```
* Es necesario incluir dos puntos `:` al final de la etiqueta cuando se declara `Bucle:`.
* Sin embargo cuando se utiliza la etiqueta en una instrucci√≥n NO incluya los dos puntos al final, por ejemplo `JMP Bucle`.


## Comentarios

Los comentarios son ignorados por el ensamblador y siempre van precedidos por un punto y coma `;`.

```ac
; Este es un comentario en una l√≠nea por s√≠ mismo.
0. LDA [4] ; Este es un comentario en l√≠nea y debe estar al final de una l√≠nea.
```

## Directivas

Los programas se agrupan en dos secciones una para datos y otra para c√≥digo, para ello se utliza las directivas `SECTION .DATA`  y `SECTION .TEXT`.

```ac
; Simple programa Z = X + Y 
SECTION .DATA   ; Secci√≥n de datos
    X:  DB  3
    Y:  DB  2
    Z:  DB  0

SECTION .TEXT   ; Secci√≥n de c√≥digo
  LDA [X]
  ADD [Y]
  STA [Z]
  HLT
```


:::caution[Limite]
El programa puede tener como maximo de 32 instrucciones.
:::
